<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebExtract-Pro</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <style>
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Ensure full height dark mode coverage */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        html {
            background-color: #f9fafb; /* light mode fallback */
        }

        html.dark {
            background-color: #111827; /* dark mode background */
        }

        body {
            background-color: inherit;
        }

        #root {
            min-height: 100vh;
            height: 100%;
        }
        
        .kilimall-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .jumia-gradient {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .glassmorphism {
            backdrop-filter: blur(16px) saturate(180%);
            background-color: rgba(255, 255, 255, 0.75);
            border: 1px solid rgba(209, 213, 219, 0.3);
        }
        
        .worker-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .worker-card:hover {
            transform: scale(1.02);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Icon Components
        const UserIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
            }))
        );

        const LockIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
            }))
        );

        const EmailIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"
            }))
        );

        const ShoppingBagIcon = () => (
            React.createElement("svg", {
                className: "w-6 h-6",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M16 11V7a4 4 0 00-8 0v4M5 9h14l-1 12H6L5 9z"
            }))
        );

        const SearchIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }))
        );

        const ActivityIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
            }))
        );

        const LogoutIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
            }))
        );

        const DashboardIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z"
            }), React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"
            }))
        );

        const BriefcaseIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0H8m8 0v2a2 2 0 01-2 2H10a2 2 0 01-2-2V8"
            }))
        );

        const ClockIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
            }))
        );

        const CogIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
            }), React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M15 12a3 3 0 11-6 0 3 3 0 016 0z"
            }))
        );

        const CodeIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"
            }))
        );

        const MenuIcon = () => (
            React.createElement("svg", {
                className: "w-6 h-6",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M4 6h16M4 12h16M4 18h16"
            }))
        );

        const SunIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
            }))
        );

        const MoonIcon = () => (
            React.createElement("svg", {
                className: "w-5 h-5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
            }))
        );

        const ExternalLinkIcon = () => (
            React.createElement("svg", {
                className: "w-4 h-4",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
            }))
        );

        // API Configuration
        const API_BASE_URL = 'http://127.0.0.1:8000';

        // Authentication Service
        const AuthService = {
            login: async (email, password) => {
                try {
                    const response = await fetch(`${API_BASE_URL}/api/auth/login`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, password })
                    });
                    const data = await response.json();
                    if (data.success) {
                        localStorage.setItem('token', data.token);
                        localStorage.setItem('user', JSON.stringify(data.user));
                        return { success: true, user: data.user };
                    }
                    return { success: false, error: data.error };
                } catch (error) {
                    return { success: false, error: 'Connection failed' };
                }
            },

            register: async (name, email, password) => {
                try {
                    const response = await fetch(`${API_BASE_URL}/api/auth/register`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ name, email, password })
                    });
                    const data = await response.json();
                    if (data.success) {
                        localStorage.setItem('token', data.token);
                        localStorage.setItem('user', JSON.stringify(data.user));
                        return { success: true, user: data.user };
                    }
                    return { success: false, error: data.error };
                } catch (error) {
                    return { success: false, error: 'Connection failed' };
                }
            },

            logout: () => {
                localStorage.removeItem('token');
                localStorage.removeItem('user');
            },

            getCurrentUser: () => {
                const user = localStorage.getItem('user');
                return user ? JSON.parse(user) : null;
            },

            getToken: () => {
                return localStorage.getItem('token');
            }
        };

        // Worker configurations
        const WORKERS = [
            {
                id: 'kilimall',
                name: 'Kilimall Scraper',
                description: 'Extract product data from Kilimall Kenya marketplace',
                color: 'kilimall-gradient',
                textColor: 'text-blue-600',
                bgColor: 'bg-blue-50',
                borderColor: 'border-blue-200',
                port: 5001,
                features: ['Search Products', 'Category Scraping', 'Real-time Progress', 'Task Management'],
                logo: '🛒'
            },
            {
                id: 'jumia',
                name: 'Jumia Scraper',
                description: 'Extract product data from Jumia Kenya e-commerce platform',
                color: 'jumia-gradient',
                textColor: 'text-orange-600',
                bgColor: 'bg-orange-50',
                borderColor: 'border-orange-200',
                port: 5000,
                features: ['Product Search', 'Category URLs', 'Progress Tracking', 'Data Export'],
                logo: '🛍️'
            }
        ];

        // Navigation items
        const NAVIGATION_ITEMS = [
            { id: 'dashboard', name: 'Dashboard', icon: DashboardIcon },
            { id: 'job-manager', name: 'Job Manager', icon: BriefcaseIcon },
            { id: 'job-scheduler', name: 'Job Scheduler', icon: ClockIcon },
            { id: 'workers', name: 'Workers', icon: ActivityIcon },
            { id: 'parser', name: 'Parser', icon: CodeIcon },
            { id: 'settings', name: 'Settings', icon: CogIcon }
        ];

        const KenyaScraperHub = () => {
            const [user, setUser] = useState(null);
            const [authMode, setAuthMode] = useState('login'); // 'login' or 'register'
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            // Form states
            const [formData, setFormData] = useState({
                name: '',
                email: '',
                password: '',
                confirmPassword: ''
            });

            // Navigation states
            const [activeTab, setActiveTab] = useState('dashboard');
            const [sidebarOpen, setSidebarOpen] = useState(false);

            // Theme state
            const [isDarkMode, setIsDarkMode] = useState(() => {
                const saved = localStorage.getItem('theme');
                return saved === 'dark' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches);
            });

            // Update theme
            useEffect(() => {
                localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
                if (isDarkMode) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }, [isDarkMode]);

            const toggleTheme = () => {
                setIsDarkMode(!isDarkMode);
            };

            // Dashboard states
            const [selectedWorker, setSelectedWorker] = useState(null);
            const [workerStats, setWorkerStats] = useState({});

            // Real-time dashboard stats
            const [dashboardStats, setDashboardStats] = useState({
                activeJobs: 0,
                scheduledJobs: 0,
                completedJobs: 0,
                itemsScraped: 0,
                totalJobs: 0
            });

            // Recent scraping sessions from database
            const [recentSessions, setRecentSessions] = useState([]);

            const [isRefreshing, setIsRefreshing] = useState(false);

            useEffect(() => {
                // Check for existing session
                const currentUser = AuthService.getCurrentUser();
                if (currentUser) {
                    setUser(currentUser);
                    refreshAllStats();
                }
            }, []);

            // Set up periodic refresh for dashboard stats when user is logged in
            useEffect(() => {
                let intervalId;

                if (user) {
                    // Initial load
                    refreshAllStats();

                    // Set up periodic refresh every 10 seconds (reduced from 5 to reduce load)
                    // Only refresh if on dashboard or job-manager tabs
                    intervalId = setInterval(() => {
                        if (activeTab === 'dashboard' || activeTab === 'job-manager') {
                            refreshAllStats();
                        }
                    }, 10000);
                }

                return () => {
                    if (intervalId) {
                        clearInterval(intervalId);
                    }
                };
            }, [user, activeTab]);

            const loadWorkerStats = async () => {
                const stats = {};
                const token = AuthService.getToken();
                
                for (const worker of WORKERS) {
                    try {
                        const response = await fetch(`http://127.0.0.1:${worker.port}/api/stats`, {
                            headers: { 'Authorization': `Bearer ${token}` }
                        });
                        if (response.ok) {
                            const data = await response.json();
                            stats[worker.id] = data;
                        }
                    } catch (error) {
                        stats[worker.id] = { error: 'Offline' };
                    }
                }
                setWorkerStats(stats);
            };

            // Load dashboard statistics from database
            const loadDashboardStats = async () => {
                try {
                    const token = AuthService.getToken();

                    if (!token) {
                        console.log('No auth token, using fallback stats');
                        await loadFallbackStats();
                        return;
                    }

                    // Fetch stats from main dashboard API (database-backed)
                    const response = await fetch(`${API_BASE_URL}/api/dashboard/stats`, {
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        console.log('[DEBUG] Dashboard stats received:', data);

                        // Calculate active jobs (running sessions)
                        const activeCount = data.recent_sessions?.filter(s => s.status === 'running').length || 0;
                        const completedCount = data.completed_sessions || 0;
                        const totalProducts = data.total_products || 0;
                        const totalSessions = data.total_sessions || 0;

                        setDashboardStats({
                            activeJobs: activeCount,
                            scheduledJobs: 0, // This would come from a scheduler service
                            completedJobs: completedCount,
                            itemsScraped: totalProducts,
                            totalJobs: totalSessions
                        });

                        // Store recent sessions for display
                        setRecentSessions(data.recent_sessions || []);
                        console.log('[DEBUG] Recent sessions set:', data.recent_sessions?.length || 0);
                    } else {
                        console.log(`Dashboard API error: ${response.status} - Auth may have expired`);

                        // Load all sessions from database without auth (temporary workaround)
                        try {
                            // First try the webapp database endpoint
                            const dbResponse = await fetch(`${API_BASE_URL}/api/sessions/all`);
                            if (dbResponse.ok) {
                                const dbData = await dbResponse.json();
                                const sessions = dbData.sessions || [];
                                console.log('[DEBUG] Loaded sessions from database:', dbData.count);
                                setRecentSessions(sessions);

                                // Calculate stats from sessions instead of using worker endpoints
                                const activeCount = sessions.filter(s => s.status === 'running').length;
                                const completedCount = sessions.filter(s => s.status === 'completed').length;
                                const totalProducts = sessions.reduce((sum, s) => sum + (s.products_found || 0), 0);

                                setDashboardStats({
                                    activeJobs: activeCount,
                                    scheduledJobs: 0,
                                    completedJobs: completedCount,
                                    itemsScraped: totalProducts,
                                    totalJobs: sessions.length
                                });
                                console.log('[DEBUG] Stats calculated from sessions:', { activeCount, completedCount, totalProducts });
                                return; // Don't call fallback if we got database stats
                            } else {
                                console.log('Database endpoint unavailable, using empty state');
                                setRecentSessions([]);
                            }
                        } catch (err) {
                            console.log('Could not load sessions:', err);
                            setRecentSessions([]);
                        }

                        await loadFallbackStats();
                    }
                } catch (error) {
                    console.error('Error loading dashboard stats:', error);
                    await loadFallbackStats();
                }
            };

            // Fallback: Load stats from worker endpoints if database is unavailable
            const loadFallbackStats = async () => {
                try {
                    let totalActiveJobs = 0;
                    let totalCompletedJobs = 0;
                    let totalItemsScraped = 0;
                    let totalJobs = 0;

                    const token = AuthService.getToken();

                    for (const worker of WORKERS) {
                        try {
                            const response = await fetch(`http://127.0.0.1:${worker.port}/api/stats`, {
                                headers: { 'Authorization': `Bearer ${token}` }
                            });
                            if (response.ok) {
                                const data = await response.json();
                                totalActiveJobs += data.active_tasks || data.active_jobs || 0;
                                totalCompletedJobs += data.completed_tasks || data.completed_jobs || 0;
                                totalItemsScraped += data.total_products_scraped || data.total_items_scraped || 0;
                                totalJobs += data.total_tasks || data.total_jobs || 0;
                            }
                        } catch (err) {
                            console.log(`Worker ${worker.id} stats unavailable`);
                        }
                    }

                    setDashboardStats({
                        activeJobs: totalActiveJobs,
                        scheduledJobs: 0,
                        completedJobs: totalCompletedJobs,
                        itemsScraped: totalItemsScraped,
                        totalJobs: totalJobs
                    });
                } catch (error) {
                    console.error('Error loading fallback stats:', error);
                }
            };

            // Combined refresh function
            const refreshAllStats = async () => {
                setIsRefreshing(true);
                try {
                    await Promise.all([loadWorkerStats(), loadDashboardStats()]);
                } finally {
                    setIsRefreshing(false);
                }
            };

            const handleInputChange = (e) => {
                setFormData({
                    ...formData,
                    [e.target.name]: e.target.value
                });
            };

            const handleAuth = async (e) => {
                e.preventDefault();
                setLoading(true);
                setError('');

                try {
                    let result;
                    if (authMode === 'login') {
                        result = await AuthService.login(formData.email, formData.password);
                    } else {
                        if (formData.password !== formData.confirmPassword) {
                            setError('Passwords do not match');
                            setLoading(false);
                            return;
                        }
                        result = await AuthService.register(formData.name, formData.email, formData.password);
                    }

                    if (result.success) {
                        setUser(result.user);
                        setFormData({ name: '', email: '', password: '', confirmPassword: '' });
                        loadWorkerStats();
                    } else {
                        setError(result.error);
                    }
                } catch (error) {
                    setError('An unexpected error occurred');
                } finally {
                    setLoading(false);
                }
            };

            const handleLogout = () => {
                AuthService.logout();
                setUser(null);
                setSelectedWorker(null);
                setWorkerStats({});
            };

            // Modal state for worker popup
            const [workerModalOpen, setWorkerModalOpen] = useState(false);
            const [activeWorker, setActiveWorker] = useState(null);

            const openWorker = (worker) => {
                setActiveWorker(worker);
                setWorkerModalOpen(true);
            };

            const closeWorkerModal = () => {
                setWorkerModalOpen(false);
                setActiveWorker(null);
            };

            // Close modal on ESC key
            useEffect(() => {
                const handleEscape = (e) => {
                    if (e.key === 'Escape' && workerModalOpen) {
                        closeWorkerModal();
                    }
                };

                if (workerModalOpen) {
                    document.addEventListener('keydown', handleEscape);
                    return () => document.removeEventListener('keydown', handleEscape);
                }
            }, [workerModalOpen]);

            // Authentication Form Component
            const AuthForm = () => (
                React.createElement("div", {
                    className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"
                }, React.createElement("div", {
                    className: "max-w-md w-full space-y-8 p-8"
                }, [
                    React.createElement("div", {
                        key: "auth-header",
                        className: "text-center"
                    }, [
                        React.createElement("div", {
                            key: "logo-container",
                            className: "mx-auto h-16 w-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center mb-4"
                        }, React.createElement(ShoppingBagIcon, { className: "text-white" })),
                        React.createElement("h2", {
                            key: "auth-title",
                            className: "text-3xl font-bold text-gray-900"
                        }, "WebExtract-Pro"),
                        React.createElement("p", {
                            key: "auth-subtitle",
                            className: "mt-2 text-gray-600"
                        }, authMode === 'login' ? "Sign in to your account" : "Create your account")
                    ]),
                    
                    React.createElement("div", {
                        key: "auth-card",
                        className: "glassmorphism rounded-xl shadow-xl p-8"
                    }, [
                        React.createElement("div", {
                            key: "auth-tabs",
                            className: "flex mb-6"
                        }, [
                            React.createElement("button", {
                                key: "login-tab",
                                onClick: () => setAuthMode('login'),
                                className: `flex-1 py-2 px-4 text-sm font-medium rounded-l-lg ${
                                    authMode === 'login' 
                                        ? 'bg-blue-600 text-white' 
                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                }`
                            }, "Sign In"),
                            React.createElement("button", {
                                key: "register-tab",
                                onClick: () => setAuthMode('register'),
                                className: `flex-1 py-2 px-4 text-sm font-medium rounded-r-lg ${
                                    authMode === 'register' 
                                        ? 'bg-blue-600 text-white' 
                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                }`
                            }, "Sign Up")
                        ]),

                        React.createElement("form", {
                            key: "auth-form",
                            onSubmit: handleAuth,
                            className: "space-y-4"
                        }, [
                            authMode === 'register' && React.createElement("div", {
                                key: "name-field"
                            }, [
                                React.createElement("label", {
                                    key: "name-label",
                                    className: "block text-sm font-medium text-gray-700 mb-1"
                                }, "Full Name"),
                                React.createElement("div", {
                                    key: "name-input-container",
                                    className: "relative"
                                }, [
                                    React.createElement("div", {
                                        key: "name-icon",
                                        className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                                    }, React.createElement(UserIcon, { className: "text-gray-400" })),
                                    React.createElement("input", {
                                        key: "name-input",
                                        type: "text",
                                        name: "name",
                                        value: formData.name,
                                        onChange: handleInputChange,
                                        required: true,
                                        className: "block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                        placeholder: "Enter your full name"
                                    })
                                ])
                            ]),

                            React.createElement("div", {
                                key: "email-field"
                            }, [
                                React.createElement("label", {
                                    key: "email-label",
                                    className: "block text-sm font-medium text-gray-700 mb-1"
                                }, "Email Address"),
                                React.createElement("div", {
                                    key: "email-input-container",
                                    className: "relative"
                                }, [
                                    React.createElement("div", {
                                        key: "email-icon",
                                        className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                                    }, React.createElement(EmailIcon, { className: "text-gray-400" })),
                                    React.createElement("input", {
                                        key: "email-input",
                                        type: "email",
                                        name: "email",
                                        value: formData.email,
                                        onChange: handleInputChange,
                                        required: true,
                                        className: "block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                        placeholder: "Enter your email"
                                    })
                                ])
                            ]),

                            React.createElement("div", {
                                key: "password-field"
                            }, [
                                React.createElement("label", {
                                    key: "password-label",
                                    className: "block text-sm font-medium text-gray-700 mb-1"
                                }, "Password"),
                                React.createElement("div", {
                                    key: "password-input-container",
                                    className: "relative"
                                }, [
                                    React.createElement("div", {
                                        key: "password-icon",
                                        className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                                    }, React.createElement(LockIcon, { className: "text-gray-400" })),
                                    React.createElement("input", {
                                        key: "password-input",
                                        type: "password",
                                        name: "password",
                                        value: formData.password,
                                        onChange: handleInputChange,
                                        required: true,
                                        className: "block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                        placeholder: "Enter your password"
                                    })
                                ])
                            ]),

                            authMode === 'register' && React.createElement("div", {
                                key: "confirm-password-field"
                            }, [
                                React.createElement("label", {
                                    key: "confirm-password-label",
                                    className: "block text-sm font-medium text-gray-700 mb-1"
                                }, "Confirm Password"),
                                React.createElement("div", {
                                    key: "confirm-password-input-container",
                                    className: "relative"
                                }, [
                                    React.createElement("div", {
                                        key: "confirm-password-icon",
                                        className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                                    }, React.createElement(LockIcon, { className: "text-gray-400" })),
                                    React.createElement("input", {
                                        key: "confirm-password-input",
                                        type: "password",
                                        name: "confirmPassword",
                                        value: formData.confirmPassword,
                                        onChange: handleInputChange,
                                        required: true,
                                        className: "block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                        placeholder: "Confirm your password"
                                    })
                                ])
                            ]),

                            error && React.createElement("div", {
                                key: "error-message",
                                className: "bg-red-50 border border-red-200 rounded-lg p-3 text-red-700 text-sm"
                            }, error),

                            React.createElement("button", {
                                key: "submit-button",
                                type: "submit",
                                disabled: loading,
                                className: "w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"
                            }, loading ? [
                                React.createElement("div", {
                                    key: "loading-spinner",
                                    className: "w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"
                                }),
                                React.createElement("span", { key: "loading-text" }, "Please wait...")
                            ] : [
                                React.createElement("span", { key: "submit-text" }, authMode === 'login' ? 'Sign In' : 'Create Account')
                            ])
                        ])
                    ])
                ]))
            );

            // Sidebar Component
            const Sidebar = () => (
                React.createElement("div", {
                    className: `fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'} lg:translate-x-0 lg:sticky lg:top-0 lg:h-screen flex flex-col`
                }, [
                    React.createElement("div", {
                        key: "sidebar-header",
                        className: "flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"
                    }, [
                        React.createElement("div", {
                            key: "sidebar-logo",
                            className: "flex items-center space-x-3"
                        }, [
                            React.createElement("div", {
                                key: "logo-icon",
                                className: "p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg"
                            }, React.createElement(ShoppingBagIcon, { className: "text-white w-5 h-5" })),
                            React.createElement("div", {
                                key: "logo-text"
                            }, [
                                React.createElement("h2", {
                                    key: "logo-title",
                                    className: "text-lg font-bold text-gray-900 dark:text-white"
                                }, "WebExtract-Pro"),
                                React.createElement("p", {
                                    key: "logo-subtitle",
                                    className: "text-xs text-gray-500 dark:text-gray-400"
                                }, "Data Extraction Platform")
                            ])
                        ]),
                        React.createElement("button", {
                            key: "close-sidebar",
                            onClick: () => setSidebarOpen(false),
                            className: "lg:hidden p-2 rounded-md text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                        }, React.createElement("svg", {
                            className: "h-6 w-6",
                            fill: "none",
                            viewBox: "0 0 24 24",
                            stroke: "currentColor"
                        }, React.createElement("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M6 18L18 6M6 6l12 12"
                        })))
                    ]),
                    React.createElement("nav", {
                        key: "sidebar-nav",
                        className: "flex-1 px-4 py-6 space-y-1 overflow-y-auto"
                    }, NAVIGATION_ITEMS.map(item =>
                        React.createElement("button", {
                            key: `nav-${item.id}`,
                            onClick: () => setActiveTab(item.id),
                            className: `w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors duration-200 ${
                                activeTab === item.id
                                    ? 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg'
                                    : 'text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white'
                            }`
                        }, [
                            React.createElement(item.icon, { key: "nav-icon", className: "w-5 h-5" }),
                            React.createElement("span", {
                                key: "nav-text",
                                className: "ml-3"
                            }, item.name)
                        ])
                    )),
                    React.createElement("div", {
                        key: "sidebar-footer",
                        className: "border-t border-gray-200 dark:border-gray-700 p-4 flex-shrink-0"
                    }, [
                        React.createElement("div", {
                            key: "theme-toggle-section",
                            className: "mb-4"
                        }, React.createElement("button", {
                            onClick: toggleTheme,
                            className: "w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
                        }, [
                            isDarkMode
                                ? React.createElement(SunIcon, { key: "theme-icon", className: "w-4 h-4" })
                                : React.createElement(MoonIcon, { key: "theme-icon", className: "w-4 h-4" }),
                            React.createElement("span", { key: "theme-text", className: "ml-2" },
                                isDarkMode ? "Light Mode" : "Dark Mode")
                        ])),
                        React.createElement("div", {
                            key: "user-info",
                            className: "flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg mb-3"
                        }, [
                            React.createElement("div", {
                                key: "user-avatar",
                                className: "w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center"
                            }, React.createElement("span", {
                                className: "text-white font-medium text-sm"
                            }, user?.name?.charAt(0)?.toUpperCase())),
                            React.createElement("div", {
                                key: "user-details",
                                className: "flex-1 min-w-0"
                            }, [
                                React.createElement("p", {
                                    key: "user-name",
                                    className: "text-sm font-medium text-gray-900 dark:text-white truncate"
                                }, user?.name),
                                React.createElement("p", {
                                    key: "user-email",
                                    className: "text-xs text-gray-500 dark:text-gray-400 truncate"
                                }, user?.email)
                            ])
                        ]),
                        React.createElement("button", {
                            key: "logout-sidebar",
                            onClick: handleLogout,
                            className: "w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-500 transition-colors duration-200"
                        }, [
                            React.createElement(LogoutIcon, { key: "logout-icon", className: "w-4 h-4" }),
                            React.createElement("span", { key: "logout-text", className: "ml-2" }, "Logout")
                        ])
                    ])
                ])
            );

            // Content render functions
            const renderPlaceholderContent = (title, description) => (
                React.createElement("div", {
                    className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8 text-center"
                }, [
                    React.createElement("h2", {
                        key: "placeholder-title",
                        className: "text-2xl font-bold text-gray-900 dark:text-white mb-4"
                    }, title),
                    React.createElement("p", {
                        key: "placeholder-desc",
                        className: "text-gray-600 dark:text-gray-400 mb-6"
                    }, description),
                    React.createElement("div", {
                        key: "placeholder-icon",
                        className: "w-24 h-24 mx-auto bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4"
                    }, React.createElement("span", {
                        className: "text-4xl text-gray-400 dark:text-gray-500"
                    }, "⚙️")),
                    React.createElement("p", {
                        key: "placeholder-status",
                        className: "text-sm text-gray-500 dark:text-gray-400"
                    }, "This feature is coming soon...")
                ])
            );

            const renderWorkersContent = () => (
                React.createElement("div", {
                    className: "grid grid-cols-1 md:grid-cols-2 gap-6"
                }, WORKERS.map(worker => {
                    const stats = workerStats[worker.id] || {};
                    return React.createElement("div", {
                        key: `worker-${worker.id}`,
                        className: "bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"
                    }, [
                        React.createElement("div", {
                            key: "worker-header",
                            className: `${worker.color} p-6 text-white`
                        }, [
                            React.createElement("div", {
                                key: "worker-title-section",
                                className: "flex items-center justify-between mb-4"
                            }, [
                                React.createElement("div", {
                                    key: "worker-title",
                                    className: "flex items-center space-x-3"
                                }, [
                                    React.createElement("span", {
                                        key: "worker-logo",
                                        className: "text-3xl"
                                    }, worker.logo),
                                    React.createElement("div", {
                                        key: "worker-info"
                                    }, [
                                        React.createElement("h3", {
                                            key: "worker-name",
                                            className: "text-xl font-bold"
                                        }, worker.name),
                                        React.createElement("p", {
                                            key: "worker-desc",
                                            className: "text-sm opacity-90"
                                        }, worker.description)
                                    ])
                                ]),
                                React.createElement("div", {
                                    key: "worker-status",
                                    className: `w-3 h-3 rounded-full ${stats.error ? 'bg-red-400' : 'bg-green-400'}`
                                })
                            ])
                        ]),
                        React.createElement("div", {
                            key: "worker-content",
                            className: "p-6"
                        }, React.createElement("button", {
                            onClick: () => openWorker(worker),
                            disabled: !!stats.error,
                            className: `w-full ${worker.color} text-white py-3 px-6 rounded-lg font-semibold hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2`
                        }, [
                            React.createElement(ExternalLinkIcon, { key: "open-icon", className: "w-4 h-4" }),
                            React.createElement("span", { key: "open-text" }, stats.error ? 'Service Offline' : 'Open Scraper')
                        ]))
                    ]);
                }))
            );

            const StatCard = ({ title, value, period, trend }) => (
                React.createElement("div", {
                    className: "bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 flex-1"
                }, [
                    React.createElement("div", {
                        key: "stat-header",
                        className: "flex justify-between items-start"
                    }, [
                        React.createElement("div", {
                            key: "stat-content"
                        }, [
                            React.createElement("p", {
                                key: "stat-title",
                                className: "text-sm text-gray-500 dark:text-gray-400"
                            }, title),
                            React.createElement("p", {
                                key: "stat-value",
                                className: "text-3xl font-bold text-gray-900 dark:text-white"
                            }, value)
                        ]),
                        trend && React.createElement("span", {
                            key: "stat-trend",
                            className: `h-3 w-3 rounded-full ${trend === 'up' ? 'bg-green-500' : trend === 'down' ? 'bg-red-500' : 'bg-yellow-500'}`
                        })
                    ]),
                    React.createElement("p", {
                        key: "stat-period",
                        className: "text-xs text-gray-400 dark:text-gray-500 mt-3"
                    }, period)
                ])
            );

            const StatsExplorer = () => {
                const [activeTab, setActiveTab] = useState('overall');

                // Calculate stats from recent sessions
                const calculateChartData = () => {
                    const jumiaCount = recentSessions.filter(s => s.worker_type === 'jumia').length;
                    const kilimallCount = recentSessions.filter(s => s.worker_type === 'kilimall').length;
                    const completedCount = recentSessions.filter(s => s.status === 'completed').length;
                    const runningCount = recentSessions.filter(s => s.status === 'running').length;
                    const failedCount = recentSessions.filter(s => s.status === 'failed').length;

                    const totalProducts = recentSessions.reduce((sum, s) => sum + (s.products_found || 0), 0);
                    const totalPages = recentSessions.reduce((sum, s) => sum + (s.pages_scraped || 0), 0);

                    return {
                        jumiaCount,
                        kilimallCount,
                        completedCount,
                        runningCount,
                        failedCount,
                        totalProducts,
                        totalPages,
                        totalSessions: recentSessions.length
                    };
                };

                const chartData = calculateChartData();
                const maxCount = Math.max(chartData.jumiaCount, chartData.kilimallCount, 1);
                const hasData = recentSessions.length > 0;

                const renderOverallExplorer = () => (
                    React.createElement("div", {
                        className: "p-6 flex-1"
                    }, [
                        React.createElement("h3", {
                            key: "explorer-title",
                            className: "font-semibold text-gray-800 dark:text-white mb-4"
                        }, "Scraping Activity Overview"),
                        React.createElement("div", {
                            key: "chart-area",
                            className: "h-64 bg-gray-50 dark:bg-gray-700 rounded-md p-6 mb-6"
                        }, hasData ? [
                            React.createElement("div", {
                                key: "chart-header",
                                className: "flex items-center justify-between mb-4"
                            }, [
                                React.createElement("h4", {
                                    key: "title",
                                    className: "text-sm font-semibold text-gray-700 dark:text-gray-300"
                                }, "Sessions by Worker & Status"),
                                React.createElement("div", {
                                    key: "legend",
                                    className: "flex items-center gap-3 text-xs"
                                }, [
                                    React.createElement("div", {
                                        key: "success",
                                        className: "flex items-center gap-1"
                                    }, [
                                        React.createElement("div", {
                                            key: "dot",
                                            className: "w-2 h-2 rounded-full bg-green-500"
                                        }),
                                        React.createElement("span", {
                                            key: "label",
                                            className: "text-gray-600 dark:text-gray-400"
                                        }, "Success")
                                    ]),
                                    React.createElement("div", {
                                        key: "failed",
                                        className: "flex items-center gap-1"
                                    }, [
                                        React.createElement("div", {
                                            key: "dot",
                                            className: "w-2 h-2 rounded-full bg-red-500"
                                        }),
                                        React.createElement("span", {
                                            key: "label",
                                            className: "text-gray-600 dark:text-gray-400"
                                        }, "Failed")
                                    ])
                                ])
                            ]),
                            React.createElement("div", {
                                key: "chart-bars",
                                className: "h-56 flex items-end gap-8"
                            }, [
                                // Jumia Bars (Success + Failed)
                                React.createElement("div", {
                                    key: "jumia-group",
                                    className: "flex flex-col items-center w-32 flex-shrink-0"
                                }, [
                                    React.createElement("div", {
                                        key: "bars-container",
                                        className: "w-full flex gap-2 items-end h-52"
                                    }, [
                                        // Success bar
                                        React.createElement("div", {
                                            key: "success",
                                            className: "flex-1 flex flex-col items-center"
                                        }, [
                                            React.createElement("div", {
                                                key: "bar",
                                                className: "w-full bg-gradient-to-t from-green-500 to-green-400 rounded-t-lg transition-all duration-500 shadow-lg",
                                                style: {
                                                    height: `${(recentSessions.filter(s => s.worker_type === 'jumia' && s.status === 'completed').length / Math.max(maxCount, 1)) * 200}px`,
                                                    minHeight: recentSessions.filter(s => s.worker_type === 'jumia' && s.status === 'completed').length > 0 ? '24px' : '0px'
                                                }
                                            }),
                                            React.createElement("span", {
                                                key: "label",
                                                className: "text-xs font-bold text-green-600 dark:text-green-400 mt-1"
                                            }, recentSessions.filter(s => s.worker_type === 'jumia' && s.status === 'completed').length)
                                        ]),
                                        // Failed bar
                                        React.createElement("div", {
                                            key: "failed",
                                            className: "flex-1 flex flex-col items-center"
                                        }, [
                                            React.createElement("div", {
                                                key: "bar",
                                                className: "w-full bg-gradient-to-t from-red-500 to-red-400 rounded-t-lg transition-all duration-500 shadow-lg",
                                                style: {
                                                    height: `${(recentSessions.filter(s => s.worker_type === 'jumia' && s.status === 'failed').length / Math.max(maxCount, 1)) * 200}px`,
                                                    minHeight: recentSessions.filter(s => s.worker_type === 'jumia' && s.status === 'failed').length > 0 ? '24px' : '0px'
                                                }
                                            }),
                                            React.createElement("span", {
                                                key: "label",
                                                className: "text-xs font-bold text-red-600 dark:text-red-400 mt-1"
                                            }, recentSessions.filter(s => s.worker_type === 'jumia' && s.status === 'failed').length)
                                        ])
                                    ]),
                                    React.createElement("div", {
                                        key: "bar-label",
                                        className: "text-sm font-semibold text-gray-700 dark:text-gray-300 mt-2"
                                    }, "🛍️ Jumia")
                                ]),
                                // Kilimall Bars (Success + Failed)
                                React.createElement("div", {
                                    key: "kilimall-group",
                                    className: "flex flex-col items-center w-32 flex-shrink-0"
                                }, [
                                    React.createElement("div", {
                                        key: "bars-container",
                                        className: "w-full flex gap-2 items-end h-52"
                                    }, [
                                        // Success bar
                                        React.createElement("div", {
                                            key: "success",
                                            className: "flex-1 flex flex-col items-center"
                                        }, [
                                            React.createElement("div", {
                                                key: "bar",
                                                className: "w-full bg-gradient-to-t from-green-500 to-green-400 rounded-t-lg transition-all duration-500 shadow-lg",
                                                style: {
                                                    height: `${(recentSessions.filter(s => s.worker_type === 'kilimall' && s.status === 'completed').length / Math.max(maxCount, 1)) * 200}px`,
                                                    minHeight: recentSessions.filter(s => s.worker_type === 'kilimall' && s.status === 'completed').length > 0 ? '24px' : '0px'
                                                }
                                            }),
                                            React.createElement("span", {
                                                key: "label",
                                                className: "text-xs font-bold text-green-600 dark:text-green-400 mt-1"
                                            }, recentSessions.filter(s => s.worker_type === 'kilimall' && s.status === 'completed').length)
                                        ]),
                                        // Failed bar
                                        React.createElement("div", {
                                            key: "failed",
                                            className: "flex-1 flex flex-col items-center"
                                        }, [
                                            React.createElement("div", {
                                                key: "bar",
                                                className: "w-full bg-gradient-to-t from-red-500 to-red-400 rounded-t-lg transition-all duration-500 shadow-lg",
                                                style: {
                                                    height: `${(recentSessions.filter(s => s.worker_type === 'kilimall' && s.status === 'failed').length / Math.max(maxCount, 1)) * 200}px`,
                                                    minHeight: recentSessions.filter(s => s.worker_type === 'kilimall' && s.status === 'failed').length > 0 ? '24px' : '0px'
                                                }
                                            }),
                                            React.createElement("span", {
                                                key: "label",
                                                className: "text-xs font-bold text-red-600 dark:text-red-400 mt-1"
                                            }, recentSessions.filter(s => s.worker_type === 'kilimall' && s.status === 'failed').length)
                                        ])
                                    ]),
                                    React.createElement("div", {
                                        key: "bar-label",
                                        className: "text-sm font-semibold text-gray-700 dark:text-gray-300 mt-2"
                                    }, "🛒 Kilimall")
                                ]),
                                React.createElement("div", {
                                    key: "status-breakdown",
                                    className: "flex flex-col justify-center space-y-2 px-4 flex-1"
                                }, [
                                    React.createElement("div", {
                                        key: "completed",
                                        className: "flex items-center gap-2"
                                    }, [
                                        React.createElement("span", {
                                            key: "label",
                                            className: "text-xs text-gray-600 dark:text-gray-400 whitespace-nowrap"
                                        }, "✅ Completed"),
                                        React.createElement("span", {
                                            key: "value",
                                            className: "text-base font-bold text-green-600 dark:text-green-400"
                                        }, chartData.completedCount)
                                    ]),
                                    React.createElement("div", {
                                        key: "running",
                                        className: "flex items-center gap-2"
                                    }, [
                                        React.createElement("span", {
                                            key: "label",
                                            className: "text-xs text-gray-600 dark:text-gray-400 whitespace-nowrap"
                                        }, "🔵 Running"),
                                        React.createElement("span", {
                                            key: "value",
                                            className: "text-base font-bold text-blue-600 dark:text-blue-400"
                                        }, chartData.runningCount)
                                    ]),
                                    React.createElement("div", {
                                        key: "failed",
                                        className: "flex items-center gap-2"
                                    }, [
                                        React.createElement("span", {
                                            key: "label",
                                            className: "text-xs text-gray-600 dark:text-gray-400 whitespace-nowrap"
                                        }, "❌ Failed"),
                                        React.createElement("span", {
                                            key: "value",
                                            className: "text-base font-bold text-red-600 dark:text-red-400"
                                        }, chartData.failedCount)
                                    ])
                                ])
                            ])
                        ] : [
                            React.createElement("div", {
                                key: "empty-state",
                                className: "h-full flex flex-col items-center justify-center text-center"
                            }, [
                                React.createElement("div", {
                                    key: "icon",
                                    className: "text-6xl mb-4"
                                }, "📊"),
                                React.createElement("h4", {
                                    key: "title",
                                    className: "text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2"
                                }, "No Scraping Data Yet"),
                                React.createElement("p", {
                                    key: "desc",
                                    className: "text-sm text-gray-500 dark:text-gray-400 mb-4"
                                }, "Start your first scraping session to see analytics here"),
                                React.createElement("button", {
                                    key: "action",
                                    onClick: () => setActiveTab('workers'),
                                    className: "px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-blue-700 hover:to-purple-700 transition-all"
                                }, "Open Scrapers →")
                            ])
                        ]),
                        React.createElement("div", {
                            key: "stats-pills",
                            className: "flex flex-wrap justify-between items-center gap-4 text-xs"
                        }, [
                            React.createElement("div", {
                                key: "jobs-pill",
                                className: "flex items-center gap-2"
                            }, [
                                React.createElement("span", {
                                    className: "h-2 w-2 rounded-full bg-blue-500"
                                }),
                                React.createElement("span", {
                                    className: "font-bold text-gray-800 dark:text-white"
                                }, chartData.totalSessions),
                                React.createElement("span", {
                                    className: "text-gray-500 dark:text-gray-400 text-sm"
                                }, "Sessions")
                            ]),
                            React.createElement("div", {
                                key: "workers-pill",
                                className: "flex items-center gap-2"
                            }, [
                                React.createElement("span", {
                                    className: "h-2 w-2 rounded-full bg-purple-500"
                                }),
                                React.createElement("span", {
                                    className: "font-bold text-gray-800 dark:text-white"
                                }, "2"),
                                React.createElement("span", {
                                    className: "text-gray-500 dark:text-gray-400 text-sm"
                                }, "Workers")
                            ]),
                            React.createElement("div", {
                                key: "pages-pill",
                                className: "flex items-center gap-2"
                            }, [
                                React.createElement("span", {
                                    className: "h-2 w-2 rounded-full bg-indigo-500"
                                }),
                                React.createElement("span", {
                                    className: "font-bold text-gray-800 dark:text-white"
                                }, chartData.totalPages),
                                React.createElement("span", {
                                    className: "text-gray-500 dark:text-gray-400 text-sm"
                                }, "Pages Scraped")
                            ]),
                            React.createElement("div", {
                                key: "items-pill",
                                className: "flex items-center gap-2"
                            }, [
                                React.createElement("span", {
                                    className: "h-2 w-2 rounded-full bg-green-500"
                                }),
                                React.createElement("span", {
                                    className: "font-bold text-gray-800 dark:text-white"
                                }, chartData.totalProducts),
                                React.createElement("span", {
                                    className: "text-gray-500 dark:text-gray-400 text-sm"
                                }, "Products")
                            ]),
                            React.createElement("div", {
                                key: "status-summary",
                                className: "flex items-center gap-4"
                            }, [
                                React.createElement("span", {
                                    className: "text-green-600 dark:text-green-400 font-semibold"
                                }, `${chartData.completedCount} Completed`),
                                chartData.failedCount > 0 && React.createElement("span", {
                                    className: "text-red-600 dark:text-red-400 font-semibold"
                                }, `${chartData.failedCount} Failed`)
                            ])
                        ]),
                        React.createElement("div", {
                            key: "recent-activity",
                            className: "mt-6"
                        }, [
                            React.createElement("h4", {
                                key: "title",
                                className: "text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"
                            }, "Recent Activity"),
                            recentSessions.length > 0 ? React.createElement("div", {
                                key: "activity-grid",
                                className: "grid grid-cols-1 md:grid-cols-3 gap-3"
                            }, recentSessions.slice(0, 6).map((session, idx) => {
                                const formatTime = (iso) => {
                                    if (!iso) return '';
                                    const date = new Date(iso);
                                    return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                                };

                                return React.createElement("div", {
                                    key: idx,
                                    className: "bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 hover:shadow-md transition-shadow"
                                }, [
                                    React.createElement("div", {
                                        key: "header",
                                        className: "flex items-center justify-between mb-2"
                                    }, [
                                        React.createElement("span", {
                                            key: "worker",
                                            className: `px-2 py-0.5 text-xs font-medium rounded ${
                                                session.worker_type === 'jumia'
                                                    ? 'bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300'
                                                    : 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'
                                            }`
                                        }, session.worker_type?.toUpperCase()),
                                        React.createElement("span", {
                                            key: "status",
                                            className: `text-xs ${
                                                session.status === 'completed' ? 'text-green-600 dark:text-green-400' :
                                                session.status === 'failed' ? 'text-red-600 dark:text-red-400' :
                                                'text-blue-600 dark:text-blue-400'
                                            }`
                                        }, session.status === 'completed' ? '✓' : session.status === 'failed' ? '✗' : '●')
                                    ]),
                                    React.createElement("div", {
                                        key: "query",
                                        className: "text-sm font-medium text-gray-800 dark:text-gray-200 mb-1 truncate",
                                        title: session.search_query || session.category_url
                                    }, session.search_query || session.category_url || 'Category Scrape'),
                                    React.createElement("div", {
                                        key: "stats",
                                        className: "flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"
                                    }, [
                                        React.createElement("span", {
                                            key: "products"
                                        }, `📦 ${session.products_found || 0} products`),
                                        React.createElement("span", {
                                            key: "time"
                                        }, formatTime(session.started_at))
                                    ])
                                ]);
                            })) : React.createElement("div", {
                                key: "empty",
                                className: "text-center py-8 text-gray-500 dark:text-gray-400 text-sm"
                            }, "No recent activity. Start a scraping session to see data here!")
                        ])
                    ])
                );

                return React.createElement("div", {
                    className: "mt-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"
                }, [
                    React.createElement("div", {
                        key: "explorer-header",
                        className: "p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"
                    }, [
                        React.createElement("div", {
                            key: "explorer-tabs",
                            className: "flex items-center gap-1"
                        }, [
                            React.createElement("button", {
                                key: "overall-tab",
                                onClick: () => setActiveTab('overall'),
                                className: `px-3 py-1 text-sm font-semibold rounded-md ${activeTab === 'overall' ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300' : 'text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700'}`
                            }, "Overall"),
                            React.createElement("button", {
                                key: "jobs-tab",
                                onClick: () => setActiveTab('jobs'),
                                className: `px-3 py-1 text-sm font-semibold rounded-md ${activeTab === 'jobs' ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300' : 'text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700'}`
                            }, "Jobs"),
                            React.createElement("button", {
                                key: "errors-tab",
                                onClick: () => setActiveTab('errors'),
                                className: `px-3 py-1 text-sm font-semibold rounded-md ${activeTab === 'errors' ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300' : 'text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700'}`
                            }, "Errors")
                        ]),
                        React.createElement("button", {
                            key: "refresh-button",
                            onClick: refreshAllStats,
                            disabled: isRefreshing,
                            className: "text-sm text-blue-600 dark:text-blue-400 font-semibold hover:underline disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1"
                        }, [
                            isRefreshing && React.createElement("div", {
                                key: "spinner",
                                className: "w-3 h-3 border border-blue-600 dark:border-blue-400 border-t-transparent rounded-full animate-spin"
                            }),
                            React.createElement("span", {
                                key: "refresh-text"
                            }, isRefreshing ? "Refreshing..." : "Refresh Stats")
                        ])
                    ]),
                    React.createElement("div", {
                        key: "explorer-content",
                        className: "flex"
                    }, renderOverallExplorer())
                ]);
            };

            const renderJobManagerContent = () => {
                const [jobFilter, setJobFilter] = useState('all');
                const [searchQuery, setSearchQuery] = useState('');
                const [timeFilter, setTimeFilter] = useState('24h');
                const tableHeaders = ["Job/Spider", "Time", "Status", "Progress", "Pages", "Items", "Worker", "Task ID"];

                // Filter sessions based on active filter
                const filteredSessions = recentSessions.filter(session => {
                    if (jobFilter === 'completed') return session.status === 'completed';
                    if (jobFilter === 'running') return session.status === 'running';
                    return true; // 'all'
                }).filter(session => {
                    if (!searchQuery) return true;
                    const query = searchQuery.toLowerCase();
                    return session.search_query?.toLowerCase().includes(query) ||
                           session.task_id?.toLowerCase().includes(query) ||
                           session.worker_type?.toLowerCase().includes(query);
                });

                // Format time helper
                const formatTime = (isoString) => {
                    if (!isoString) return '-';
                    const date = new Date(isoString);
                    return date.toLocaleString();
                };

                // Calculate runtime helper
                const calculateRuntime = (startedAt, completedAt) => {
                    if (!startedAt) return '-';
                    const start = new Date(startedAt);
                    const end = completedAt ? new Date(completedAt) : new Date();
                    const diffMs = end - start;
                    const diffSecs = Math.floor(diffMs / 1000);
                    const minutes = Math.floor(diffSecs / 60);
                    const seconds = diffSecs % 60;
                    return `${minutes}m ${seconds}s`;
                };

                return React.createElement("div", {
                    className: "space-y-6"
                }, [
                    React.createElement("div", {
                        key: "schedule-section",
                        className: "p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 flex items-center gap-4"
                    }, [
                        React.createElement("span", {
                            key: "schedule-label",
                            className: "text-sm font-medium text-gray-700 dark:text-gray-300"
                        }, "Schedule Job"),
                        React.createElement("input", {
                            key: "cron-input",
                            type: "text",
                            placeholder: "Using cron job",
                            className: "flex-grow p-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"
                        }),
                        React.createElement("button", {
                            key: "schedule-btn",
                            className: "px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-semibold transition-colors"
                        }, "Schedule")
                    ]),
                    React.createElement("div", {
                        key: "jobs-table-section",
                        className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden"
                    }, [
                        React.createElement("div", {
                            key: "table-controls",
                            className: "p-4 flex justify-between items-center border-b border-gray-200 dark:border-gray-700"
                        }, [
                            React.createElement("div", {
                                key: "tab-controls",
                                className: "flex items-center gap-4 text-sm font-medium"
                            }, [
                                React.createElement("button", {
                                    key: "all-jobs-tab",
                                    onClick: () => setJobFilter('all'),
                                    className: `pb-2 ${jobFilter === 'all' ? 'text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'}`
                                }, "All Jobs"),
                                React.createElement("button", {
                                    key: "completed-tab",
                                    onClick: () => setJobFilter('completed'),
                                    className: `pb-2 ${jobFilter === 'completed' ? 'text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'}`
                                }, "Completed Jobs"),
                                React.createElement("button", {
                                    key: "running-tab",
                                    onClick: () => setJobFilter('running'),
                                    className: `pb-2 ${jobFilter === 'running' ? 'text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'}`
                                }, "Running Jobs")
                            ]),
                            React.createElement("div", {
                                key: "search-controls",
                                className: "flex items-center gap-2"
                            }, [
                                React.createElement("div", {
                                    key: "search-wrapper",
                                    className: "relative"
                                }, [
                                    React.createElement("svg", {
                                        key: "search-icon",
                                        className: "absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500",
                                        fill: "none",
                                        stroke: "currentColor",
                                        viewBox: "0 0 24 24"
                                    }, React.createElement("path", {
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        strokeWidth: 2,
                                        d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                                    })),
                                    React.createElement("input", {
                                        key: "search-input",
                                        type: "text",
                                        placeholder: "Search Job & Spider Names",
                                        value: searchQuery,
                                        onChange: (e) => setSearchQuery(e.target.value),
                                        className: "pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm w-64 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"
                                    })
                                ]),
                                React.createElement("select", {
                                    key: "time-filter",
                                    value: timeFilter,
                                    onChange: (e) => setTimeFilter(e.target.value),
                                    className: "p-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700"
                                }, [
                                    React.createElement("option", { key: "24h", value: "24h" }, "Last 24 Hours"),
                                    React.createElement("option", { key: "7d", value: "7d" }, "Last 7 Days"),
                                    React.createElement("option", { key: "30d", value: "30d" }, "Last 30 Days")
                                ])
                            ])
                        ]),
                        React.createElement("div", {
                            key: "table-wrapper",
                            className: "overflow-x-auto overflow-y-auto max-h-[600px]"
                        }, React.createElement("table", {
                            className: "w-full text-sm text-left"
                        }, [
                            React.createElement("thead", {
                                key: "table-head",
                                className: "text-xs text-gray-700 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-700"
                            }, React.createElement("tr", {}, tableHeaders.map(header =>
                                React.createElement("th", {
                                    key: header,
                                    scope: "col",
                                    className: "px-6 py-3"
                                }, header)
                            ))),
                            React.createElement("tbody", {
                                key: "table-body"
                            }, filteredSessions.length === 0 ? (
                                React.createElement("tr", {}, React.createElement("td", {
                                    colSpan: tableHeaders.length,
                                    className: "text-center py-16 text-gray-500 dark:text-gray-400"
                                }, recentSessions.length === 0 ? "No scraping sessions yet. Start a Jumia scrape to see data here!" : "No jobs match your filters."))
                            ) : (
                                filteredSessions.map((session, index) =>
                                    React.createElement("tr", {
                                        key: session.task_id || index,
                                        className: "border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"
                                    }, [
                                        React.createElement("td", {
                                            key: "job-col",
                                            className: "px-6 py-4 font-medium text-gray-900 dark:text-gray-100"
                                        }, session.search_query || session.category_url || 'Category Scrape'),
                                        React.createElement("td", {
                                            key: "time-col",
                                            className: "px-6 py-4 text-gray-600 dark:text-gray-400 text-xs"
                                        }, formatTime(session.started_at)),
                                        React.createElement("td", {
                                            key: "status-col",
                                            className: "px-6 py-4"
                                        }, React.createElement("span", {
                                            className: `px-2 py-1 text-xs font-medium rounded-full ${
                                                session.status === 'completed' ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' :
                                                session.status === 'running' ? 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200' :
                                                session.status === 'failed' ? 'bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200' :
                                                'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200'
                                            }`
                                        }, session.status || 'pending')),
                                        React.createElement("td", {
                                            key: "progress-col",
                                            className: "px-6 py-4"
                                        }, React.createElement("div", {
                                            className: "flex items-center space-x-2"
                                        }, [
                                            React.createElement("div", {
                                                key: "progress-bar",
                                                className: "w-16 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"
                                            }, React.createElement("div", {
                                                className: "h-full bg-blue-600 dark:bg-blue-500 transition-all duration-300",
                                                style: { width: `${session.progress || 0}%` }
                                            })),
                                            React.createElement("span", {
                                                key: "progress-text",
                                                className: "text-xs text-gray-600 dark:text-gray-400"
                                            }, `${session.progress || 0}%`)
                                        ])),
                                        React.createElement("td", {
                                            key: "pages-col",
                                            className: "px-6 py-4 text-gray-900 dark:text-gray-100"
                                        }, session.pages_scraped || 0),
                                        React.createElement("td", {
                                            key: "items-col",
                                            className: "px-6 py-4 text-gray-900 dark:text-gray-100 font-semibold"
                                        }, session.products_found || 0),
                                        React.createElement("td", {
                                            key: "worker-col",
                                            className: "px-6 py-4"
                                        }, React.createElement("span", {
                                            className: `px-2 py-1 text-xs font-medium rounded ${
                                                session.worker_type === 'jumia' ? 'bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200' :
                                                'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200'
                                            }`
                                        }, session.worker_type || 'unknown')),
                                        React.createElement("td", {
                                            key: "taskid-col",
                                            className: "px-6 py-4 text-gray-600 dark:text-gray-400 font-mono text-xs"
                                        }, session.task_id || '-')
                                    ])
                                )
                            ))
                        ])
                        )
                    ])
                ]);
            };

            const renderJobSchedulerContent = () => {
                const [scheduledJobs, setScheduledJobs] = useState([]);
                const [searchQuery, setSearchQuery] = useState('');
                const [scheduleInput, setScheduleInput] = useState('');
                const tableHeaders = ["Enabled", "Job/Spider", "Server", "Status", "Cron", "Frequency (UTC)", "Last Run", "Next Run", "Action"];

                const handleScheduleJob = () => {
                    if (scheduleInput.trim()) {
                        // In a real implementation, this would call an API
                        console.log('Scheduling job with cron:', scheduleInput);
                        setScheduleInput('');
                        // Could add the job to scheduledJobs state here
                    }
                };

                return React.createElement("div", {
                    className: "space-y-6"
                }, [
                    React.createElement("div", {
                        key: "schedule-section",
                        className: "p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 flex items-center gap-4"
                    }, [
                        React.createElement("span", {
                            key: "schedule-label",
                            className: "text-sm font-medium text-gray-700 dark:text-gray-300"
                        }, "Schedule Job"),
                        React.createElement("input", {
                            key: "cron-input",
                            type: "text",
                            placeholder: "Using cron job",
                            value: scheduleInput,
                            onChange: (e) => setScheduleInput(e.target.value),
                            className: "flex-grow p-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"
                        }),
                        React.createElement("button", {
                            key: "schedule-btn",
                            onClick: handleScheduleJob,
                            className: "px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-semibold transition-colors"
                        }, "Schedule")
                    ]),
                    React.createElement("div", {
                        key: "scheduled-jobs-section",
                        className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"
                    }, [
                        React.createElement("div", {
                            key: "table-header",
                            className: "p-4 flex justify-between items-center border-b border-gray-200 dark:border-gray-700"
                        }, [
                            React.createElement("h2", {
                                key: "section-title",
                                className: "font-semibold text-gray-800 dark:text-white"
                            }, "Scheduled Jobs"),
                            React.createElement("div", {
                                key: "search-wrapper",
                                className: "relative"
                            }, [
                                React.createElement("svg", {
                                    key: "search-icon",
                                    className: "absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500",
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24"
                                }, React.createElement("path", {
                                    strokeLinecap: "round",
                                    strokeLinejoin: "round",
                                    strokeWidth: 2,
                                    d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                                })),
                                React.createElement("input", {
                                    key: "search-input",
                                    type: "text",
                                    placeholder: "Search Job & Spider Names",
                                    value: searchQuery,
                                    onChange: (e) => setSearchQuery(e.target.value),
                                    className: "pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm w-64 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"
                                })
                            ])
                        ]),
                        React.createElement("table", {
                            key: "scheduled-table",
                            className: "w-full text-sm text-left"
                        }, [
                            React.createElement("thead", {
                                key: "table-head",
                                className: "text-xs text-gray-700 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-700"
                            }, React.createElement("tr", {}, tableHeaders.map(header =>
                                React.createElement("th", {
                                    key: header,
                                    scope: "col",
                                    className: "px-6 py-3"
                                }, header)
                            ))),
                            React.createElement("tbody", {
                                key: "table-body"
                            }, scheduledJobs.length === 0 ? (
                                React.createElement("tr", {}, React.createElement("td", {
                                    colSpan: tableHeaders.length,
                                    className: "text-center py-16 text-gray-500 dark:text-gray-400"
                                }, "No scheduled jobs found."))
                            ) : (
                                scheduledJobs.map((job, index) => {
                                    return React.createElement("tr", {
                                        key: index,
                                        className: "border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"
                                    }, [
                                        React.createElement("td", {
                                            key: "enabled-col",
                                            className: "px-6 py-4"
                                        }, React.createElement("input", {
                                            type: "checkbox",
                                            checked: job.enabled || false,
                                            className: "rounded border-gray-300"
                                        })),
                                        React.createElement("td", {
                                            key: "job-col",
                                            className: "px-6 py-4 font-medium text-gray-900 dark:text-gray-100"
                                        }, job['Job/Spider'] || '-'),
                                        React.createElement("td", {
                                            key: "server-col",
                                            className: "px-6 py-4 text-gray-900 dark:text-gray-100"
                                        }, job.Server || '-'),
                                        React.createElement("td", {
                                            key: "status-col",
                                            className: "px-6 py-4"
                                        }, React.createElement("span", {
                                            className: `px-2 py-1 text-xs font-medium rounded-full ${
                                                job.Status === 'Active' ? 'bg-green-100 text-green-800' :
                                                job.Status === 'Paused' ? 'bg-yellow-100 text-yellow-800' :
                                                'bg-gray-100 text-gray-800'
                                            }`
                                        }, job.Status || 'Inactive')),
                                        React.createElement("td", {
                                            key: "cron-col",
                                            className: "px-6 py-4 font-mono text-sm text-gray-900 dark:text-gray-100"
                                        }, job.Cron || '-'),
                                        React.createElement("td", {
                                            key: "frequency-col",
                                            className: "px-6 py-4 text-gray-900 dark:text-gray-100"
                                        }, job['Frequency (UTC)'] || '-'),
                                        React.createElement("td", {
                                            key: "lastrun-col",
                                            className: "px-6 py-4 text-gray-900 dark:text-gray-100"
                                        }, job['Last Run'] || '-'),
                                        React.createElement("td", {
                                            key: "nextrun-col",
                                            className: "px-6 py-4 text-gray-900 dark:text-gray-100"
                                        }, job['Next Run'] || '-'),
                                        React.createElement("td", {
                                            key: "action-col",
                                            className: "px-6 py-4"
                                        }, React.createElement("div", {
                                            className: "flex space-x-2"
                                        }, [
                                            React.createElement("button", {
                                                key: "edit-btn",
                                                className: "text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm"
                                            }, "Edit"),
                                            React.createElement("button", {
                                                key: "delete-btn",
                                                className: "text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 text-sm"
                                            }, "Delete")
                                        ]))
                                    ]);
                                })
                            ))
                        ])
                    ])
                ]);
            };

            const renderDashboardContent = () => (
                React.createElement("div", {
                    className: "space-y-6"
                }, [
                    React.createElement("div", {
                        key: "dashboard-header",
                        className: "flex justify-between items-center"
                    }, [
                        React.createElement("div", {
                            key: "server-count",
                            className: "text-sm text-gray-500 dark:text-gray-400"
                        }, "2 Workers Available"),
                        dashboardStats.activeJobs > 0 && React.createElement("div", {
                            key: "active-indicator",
                            className: "flex items-center space-x-2 px-3 py-1 bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-full"
                        }, [
                            React.createElement("div", {
                                key: "pulse",
                                className: "w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-pulse"
                            }),
                            React.createElement("span", {
                                key: "text",
                                className: "text-xs font-medium text-blue-700 dark:text-blue-300"
                            }, `${dashboardStats.activeJobs} Active ${dashboardStats.activeJobs === 1 ? 'Job' : 'Jobs'}`)
                        ])
                    ]),
                    React.createElement("div", {
                        key: "stats-grid",
                        className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"
                    }, [
                        React.createElement(StatCard, {
                            key: "active-jobs",
                            title: "Active Jobs",
                            value: dashboardStats.activeJobs.toString(),
                            period: "Live",
                            trend: dashboardStats.activeJobs > 0 ? "up" : undefined
                        }),
                        React.createElement(StatCard, {
                            key: "scheduled-jobs",
                            title: "Scheduled Jobs",
                            value: dashboardStats.scheduledJobs.toString(),
                            period: "Next 24 hours"
                        }),
                        React.createElement(StatCard, {
                            key: "completed-jobs",
                            title: "Completed Jobs",
                            value: dashboardStats.completedJobs.toString(),
                            period: "Today"
                        }),
                        React.createElement(StatCard, {
                            key: "scraped-items",
                            title: "Items Scraped",
                            value: dashboardStats.itemsScraped.toString(),
                            period: "Total",
                            trend: dashboardStats.itemsScraped > 0 ? "up" : undefined
                        })
                    ]),
                    React.createElement(StatsExplorer, { key: "stats-explorer" }),
                    React.createElement("div", {
                        key: "recent-scrapes-table",
                        className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"
                    }, [
                        React.createElement("div", {
                            key: "table-header",
                            className: "p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"
                        }, [
                            React.createElement("h3", {
                                key: "title",
                                className: "font-semibold text-gray-800 dark:text-white"
                            }, "Recent Scraping Sessions"),
                            React.createElement("button", {
                                key: "view-all",
                                onClick: () => setActiveTab('job-manager'),
                                className: "text-sm text-blue-600 dark:text-blue-400 hover:underline"
                            }, "View All →")
                        ]),
                        React.createElement("table", {
                            key: "sessions-table",
                            className: "w-full text-sm text-left"
                        }, [
                            React.createElement("thead", {
                                key: "table-head",
                                className: "text-xs text-gray-700 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-700"
                            }, React.createElement("tr", {}, [
                                React.createElement("th", {
                                    key: "query-col",
                                    scope: "col",
                                    className: "px-6 py-3"
                                }, "Query"),
                                React.createElement("th", {
                                    key: "worker-col",
                                    scope: "col",
                                    className: "px-6 py-3"
                                }, "Worker"),
                                React.createElement("th", {
                                    key: "status-col",
                                    scope: "col",
                                    className: "px-6 py-3"
                                }, "Status"),
                                React.createElement("th", {
                                    key: "products-col",
                                    scope: "col",
                                    className: "px-6 py-3"
                                }, "Products"),
                                React.createElement("th", {
                                    key: "time-col",
                                    scope: "col",
                                    className: "px-6 py-3"
                                }, "Time")
                            ])),
                            React.createElement("tbody", {
                                key: "table-body"
                            }, recentSessions.length === 0 ? (
                                React.createElement("tr", {}, React.createElement("td", {
                                    colSpan: 5,
                                    className: "text-center py-12 text-gray-500 dark:text-gray-400"
                                }, [
                                    React.createElement("div", {
                                        key: "empty-icon",
                                        className: "text-4xl mb-2"
                                    }, "🛍️"),
                                    React.createElement("p", {
                                        key: "empty-text"
                                    }, "No scraping sessions yet."),
                                    React.createElement("p", {
                                        key: "empty-hint",
                                        className: "text-xs mt-1"
                                    }, "Go to Workers tab and start a Jumia scrape!")
                                ]))
                            ) : (
                                recentSessions.slice(0, 5).map((session, index) => {
                                    const formatTime = (isoString) => {
                                        if (!isoString) return '-';
                                        const date = new Date(isoString);
                                        const now = new Date();
                                        const diffMs = now - date;
                                        const diffMins = Math.floor(diffMs / 60000);
                                        if (diffMins < 1) return 'Just now';
                                        if (diffMins < 60) return `${diffMins}m ago`;
                                        const diffHours = Math.floor(diffMins / 60);
                                        if (diffHours < 24) return `${diffHours}h ago`;
                                        return date.toLocaleDateString();
                                    };

                                    return React.createElement("tr", {
                                        key: session.task_id || index,
                                        className: "border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"
                                    }, [
                                        React.createElement("td", {
                                            key: "query-cell",
                                            className: "px-6 py-4 text-gray-900 dark:text-gray-100"
                                        }, session.search_query || session.category_url || 'Category Scrape'),
                                        React.createElement("td", {
                                            key: "worker-cell",
                                            className: "px-6 py-4"
                                        }, React.createElement("span", {
                                            className: `px-2 py-1 text-xs font-medium rounded ${
                                                session.worker_type === 'jumia' ? 'bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-200' :
                                                'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200'
                                            }`
                                        }, session.worker_type || 'unknown')),
                                        React.createElement("td", {
                                            key: "status-cell",
                                            className: "px-6 py-4"
                                        }, React.createElement("span", {
                                            className: `px-2 py-1 text-xs font-medium rounded-full ${
                                                session.status === 'completed' ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200' :
                                                session.status === 'running' ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200' :
                                                session.status === 'failed' ? 'bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200' :
                                                'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200'
                                            }`
                                        }, session.status || 'pending')),
                                        React.createElement("td", {
                                            key: "products-cell",
                                            className: "px-6 py-4 font-semibold text-gray-900 dark:text-gray-100"
                                        }, session.products_found || 0),
                                        React.createElement("td", {
                                            key: "time-cell",
                                            className: "px-6 py-4 text-gray-600 dark:text-gray-400 text-xs"
                                        }, formatTime(session.started_at))
                                    ]);
                                })
                            ))
                        ])
                    ])
                ])
            );

            // Main Content Component
            const MainContent = () => {
                const renderContent = () => {
                    switch(activeTab) {
                        case 'dashboard':
                            return renderDashboardContent();
                        case 'job-manager':
                            return renderJobManagerContent();
                        case 'job-scheduler':
                            return renderJobSchedulerContent();
                        case 'workers':
                            return renderWorkersContent();
                        case 'parser':
                            return renderPlaceholderContent('Parser', 'Configure data parsing rules');
                        case 'settings':
                            return renderPlaceholderContent('Settings', 'Application settings and preferences');
                        default:
                            return renderDashboardContent();
                    }
                };

                return React.createElement("div", {
                    className: "flex-1 bg-gray-50 dark:bg-gray-900 min-h-screen h-full"
                }, [
                    React.createElement("header", {
                        key: "top-header",
                        className: "bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"
                    }, React.createElement("div", {
                        className: "flex items-center justify-between px-6 py-4"
                    }, [
                        React.createElement("div", {
                            key: "header-left",
                            className: "flex items-center space-x-4"
                        }, [
                            React.createElement("button", {
                                key: "mobile-menu",
                                onClick: () => setSidebarOpen(true),
                                className: "lg:hidden p-2 rounded-md text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                            }, React.createElement(MenuIcon, { className: "w-6 h-6" })),
                            React.createElement("h1", {
                                key: "page-title",
                                className: "text-2xl font-bold text-gray-900 dark:text-white capitalize"
                            }, activeTab.replace('-', ' '))
                        ]),
                        React.createElement("div", {
                            key: "header-right",
                            className: "flex items-center space-x-4"
                        }, React.createElement("div", {
                            className: "text-sm text-gray-600 dark:text-gray-400"
                        }, `Welcome back, ${user?.name}`))
                    ])),
                    React.createElement("main", {
                        key: "main-content",
                        className: "p-6 flex-1 min-h-full"
                    }, renderContent())
                ]);
            };

            // Worker Modal Component
            const WorkerModal = () => {
                if (!workerModalOpen || !activeWorker) return null;

                return React.createElement("div", {
                    className: "fixed inset-0 z-50 overflow-hidden"
                }, [
                    React.createElement("div", {
                        key: "backdrop",
                        className: "absolute inset-0 bg-black bg-opacity-75 transition-opacity",
                        onClick: closeWorkerModal
                    }),
                    React.createElement("div", {
                        key: "modal-container",
                        className: "absolute inset-0 flex items-center justify-center p-4"
                    }, React.createElement("div", {
                        className: "relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-7xl h-[90vh] flex flex-col",
                        onClick: (e) => e.stopPropagation()
                    }, [
                        React.createElement("div", {
                            key: "modal-header",
                            className: `${activeWorker.color} p-4 rounded-t-xl flex items-center justify-between text-white`
                        }, [
                            React.createElement("div", {
                                key: "header-left",
                                className: "flex items-center space-x-3"
                            }, [
                                React.createElement("span", {
                                    key: "logo",
                                    className: "text-2xl"
                                }, activeWorker.logo),
                                React.createElement("div", {
                                    key: "title"
                                }, [
                                    React.createElement("h2", {
                                        key: "name",
                                        className: "text-xl font-bold"
                                    }, activeWorker.name),
                                    React.createElement("p", {
                                        key: "desc",
                                        className: "text-sm opacity-90"
                                    }, activeWorker.description)
                                ])
                            ]),
                            React.createElement("button", {
                                key: "close-btn",
                                onClick: closeWorkerModal,
                                className: "p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors"
                            }, React.createElement("svg", {
                                className: "w-6 h-6",
                                fill: "none",
                                stroke: "currentColor",
                                viewBox: "0 0 24 24"
                            }, React.createElement("path", {
                                strokeLinecap: "round",
                                strokeLinejoin: "round",
                                strokeWidth: 2,
                                d: "M6 18L18 6M6 6l12 12"
                            })))
                        ]),
                        React.createElement("div", {
                            key: "modal-body",
                            className: "flex-1 overflow-hidden"
                        }, React.createElement("iframe", {
                            src: `http://127.0.0.1:${activeWorker.port}`,
                            className: "w-full h-full border-0",
                            title: `${activeWorker.name} Interface`
                        }))
                    ]))
                ]);
            };

            // Dashboard Layout Component
            const Dashboard = () => (
                React.createElement("div", {
                    className: "flex bg-gray-100 dark:bg-gray-900 min-h-screen"
                }, [
                    React.createElement(Sidebar, { key: "sidebar" }),
                    React.createElement(MainContent, { key: "main" }),
                    React.createElement(WorkerModal, { key: "worker-modal" }),
                    sidebarOpen && React.createElement("div", {
                        key: "overlay",
                        className: "fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",
                        onClick: () => setSidebarOpen(false)
                    })
                ])
            );

            // Main render
            return user ? React.createElement(Dashboard) : React.createElement(AuthForm);
        };

        // Render the app
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(React.createElement(KenyaScraperHub));
    </script>
</body>
</html>